<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LUQMAN HUB</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            /* Background Gradient yang lebih Colorful */
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        .app-card {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .app-card:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="antialiased text-white py-10 px-4">

    <div class="max-w-md mx-auto">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-extrabold tracking-tight mb-2 drop-shadow-lg">LUQMAN HUB</h1>
            <p class="text-blue-100 font-medium opacity-90">Your Personal App Ecosystem</p>
        </div>

        <div class="glass-card rounded-3xl p-6 mb-10">
            <h2 class="text-xs font-bold text-blue-200 uppercase tracking-widest mb-4">Tambah App Baru</h2>
            <div class="space-y-3">
                <input type="text" id="desc" 
                    class="w-full px-4 py-3 rounded-2xl bg-white/20 border border-white/30 text-white placeholder-blue-100 focus:bg-white/30 outline-none transition-all" 
                    placeholder="Nama Aplikasi">
                
                <input type="text" id="url" 
                    class="w-full px-4 py-3 rounded-2xl bg-white/20 border border-white/30 text-white placeholder-blue-100 focus:bg-white/30 outline-none transition-all" 
                    placeholder="URL Link (https://...)">
                
                <button onclick="tambah()" id="btn" 
                    class="w-full bg-yellow-400 hover:bg-yellow-300 text-blue-900 font-bold py-3 rounded-2xl shadow-lg transition-all active:scale-95">
                    SIMPAN SEKARANG
                </button>
            </div>
        </div>

        <div id="list" class="grid gap-4">
            <div class="text-center py-10">
                <div class="inline-block animate-spin rounded-full h-8 w-8 border-4 border-white/30 border-t-white"></div>
            </div>
        </div>
    </div>

    <script>
        const scriptUrl = "https://script.google.com/macros/s/AKfycbytPfNXoqEKp1fKpivEuW6L8zzlo2o857PJIQo5F2r-WPoXhNUE5M318gym1g3lGe4wVQ/exec";

        // Koleksi warna menarik untuk kad
        const colors = [
            'bg-pink-500', 'bg-orange-500', 'bg-green-500', 
            'bg-cyan-500', 'bg-indigo-500', 'bg-purple-500', 
            'bg-rose-500', 'bg-amber-500', 'bg-emerald-500'
        ];

        async function loadData() {
            try {
                const response = await fetch(scriptUrl);
                const data = await response.json();
                renderApps(data);
            } catch (err) {
                document.getElementById('list').innerHTML = `<p class="text-center">Ralat sambungan.</p>`;
            }
        }

        function renderApps(data) {
            const listContainer = document.getElementById('list');
            if (!data || data.length === 0) {
                listContainer.innerHTML = '<p class="text-center text-blue-100 opacity-60">Belum ada aplikasi.</p>';
                return;
            }

            let html = "";
            data.reverse().forEach((row, index) => {
                if(row[0] && row[1]) {
                    // Pilih warna berdasarkan index supaya warna konsisten tapi berbeza tiap kad
                    const colorClass = colors[index % colors.length];
                    const firstLetter = row[0].charAt(0).toUpperCase();
                    
                    html += `
                    <a href="${row[1]}" target="_blank" class="app-card flex items-center p-4 ${colorClass} rounded-2xl shadow-xl">
                        <div class="w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center font-bold text-2xl">
                            ${firstLetter}
                        </div>
                        <div class="ml-4 flex-1">
                            <h3 class="font-bold text-white text-lg leading-tight">${row[0]}</h3>
                            <p class="text-white/70 text-xs truncate w-40">${row[1]}</p>
                        </div>
                        <div class="bg-white/20 p-2 rounded-full">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                            </svg>
                        </div>
                    </a>`;
                }
            });
            listContainer.innerHTML = html;
        }

        async function tambah() {
            const d = document.getElementById('desc').value;
            const u = document.getElementById('url').value;
            const btn = document.getElementById('btn');

            if(!d || !u) return alert("Lengkapkan nama dan link!");

            btn.disabled = true;
            btn.innerHTML = "Sedang Menyimpan...";

            try {
                await fetch(scriptUrl, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: JSON.stringify({ desc: d, url: u })
                });
                
                document.getElementById('desc').value = "";
                document.getElementById('url').value = "";
                setTimeout(loadData, 2000);
            } catch (err) {
                alert("Gagal: " + err);
            } finally {
                btn.disabled = false;
                btn.innerHTML = "SIMPAN SEKARANG";
            }
        }

        loadData();
    </script>
</body>
</html>
